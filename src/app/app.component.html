<header class="topbar">
  <div class="brand">
    <span class="logo">Shaho</span>
    <div>
      <p class="title">社会保険管理</p>
    </div>
  </div>
  <nav class="main-nav" *ngIf="guestNavigable$ | async">
    <a routerLink="/dashboard">ダッシュボード</a>
    <a routerLink="/employees">社員一覧</a>
    <a routerLink="/calculations" *appHasRole="[RoleKey.SystemAdmin, RoleKey.Approver, RoleKey.Operator]">保険料計算</a>
    <a routerLink="/approvals" *appHasRole="[RoleKey.SystemAdmin, RoleKey.Approver, RoleKey.Operator]">
      承認一覧
    </a>
    <a routerLink="/approval-flows" *appHasRole="RoleKey.SystemAdmin">承認フロー管理</a>
    <a routerLink="/user-management" *appHasRole="RoleKey.SystemAdmin">ユーザー管理</a>
  </nav>
  <div class="actions">
    <ng-container *ngIf="user$ | async as user; else notLoggedIn">
      <span>{{ userDisplayName$ | async }}</span>
      <span class="separator">|</span>
      <span class="roles" *ngIf="roleDefinitions$ | async as roleDefinitions">
        {{ getRoleNames(roleDefinitions) }}
      </span>
      <span class="separator">|</span>
      <button type="button" (click)="logout()">ログアウト</button>
    </ng-container>
    <ng-template #notLoggedIn>
      <button type="button" (click)="login()">ログイン</button>
    </ng-template>
  </div>
</header>

<main>
  <router-outlet></router-outlet>
</main>