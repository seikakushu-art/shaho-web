<section class="login-panel">
    <header>
      <h1>ログイン</h1>
      <p class="hint">メールアドレスとパスワードでサインインします。</p>
    </header>
  
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="form-card">
      <label>
        メールアドレス
        <input type="email" formControlName="email" placeholder="user@example.com" />
      </label>
  
      <label>
        パスワード
        <div class="password-input-wrapper">
          <input [type]="showPassword ? 'text' : 'password'" formControlName="password" placeholder="6文字以上" />
          <button type="button" class="password-toggle" (click)="togglePasswordVisibility()" tabindex="-1">
            <span *ngIf="showPassword">非表示</span>
            <span *ngIf="!showPassword">表示</span>
          </button>
        </div>
      </label>
  
      <button type="submit" [disabled]="loginForm.invalid">ログイン</button>
    </form>
  
    <section class="form-card">
      <h2>パスワード変更</h2>
      <p class="hint">
        ログイン中のユーザー宛にパスワード再設定メールを送信します。
        <span class="chip">送信先: {{ (user$ | async)?.email || '未ログイン' }}</span>
      </p>
      <div class="inline">
        <button type="button" (click)="onPasswordChange()" [disabled]="!(user$ | async)">パスワード再設定メールを送る</button>
      </div>
    </section>
  
    <p class="message info" *ngIf="infoMessage">{{ infoMessage }}</p>
    <p class="message error" *ngIf="errorMessage">{{ errorMessage }}</p>
  </section>